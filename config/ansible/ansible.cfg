# Ansible Configuration File
# This file configures global settings for Ansible when running from this directory
#
# üîó INFRASTRUCTURE WORKFLOW:
# 1. OpenTofu (config/tofu/lxd/) provisions VMs with cloud-init
# 2. Cloud-init sets up users, SSH keys, and basic system configuration
# 3. Ansible (this directory) connects to provisioned VMs for management tasks
# 4. This config file ensures Ansible can reliably connect to OpenTofu-created VMs

[defaults]
# Specify the default inventory file location
# This tells Ansible where to find the list of hosts to manage
# üîó The inventory.yml contains IPs of VMs created by OpenTofu
inventory = inventory.yml

# Disable SSH host key checking for lab/development environments
# This prevents SSH from asking "Are you sure you want to connect?" prompts
# ‚ö†Ô∏è  IMPORTANT: OpenTofu creates fresh VMs with new SSH host keys each time
# WARNING: Only use this in trusted lab environments, not production
host_key_checking = False

# Use debug callback plugin for better output formatting
# This provides cleaner, more readable output from Ansible commands
stdout_callback = debug
stderr_callback = debug

# Set connection timeout in seconds
# How long to wait for SSH connections before giving up
timeout = 30

[ssh_connection]
# SSH connection optimization arguments
# These settings improve SSH connection performance and reliability:
# - ControlMaster=auto: Reuse SSH connections for multiple commands
# - ControlPersist=60s: Keep connections alive for 60 seconds after last use
# - StrictHostKeyChecking=no: Don't verify SSH host keys (lab environment only)
# - UserKnownHostsFile=/dev/null: Don't save host keys to known_hosts file
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
